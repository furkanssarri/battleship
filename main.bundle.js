(()=>{"use strict";const e=e=>{const t=Array.from({length:e},(()=>Array(e).fill(null))),a=[],n=(e,a)=>t[e][a],o=(e,t)=>null!==n(e,t),r=(e,n)=>{const o=t[e][n];return Number.isInteger(o)?a[o]:void 0};return{placeShip:(n,r,l,i)=>{if(!((t,a,n,r)=>{if("horizontal"===r&&a+n>e)return!1;if("vertical"===r&&t+n>e)return!1;for(let e=0;e<n;e++)if(o("vertical"===r?t+e:t,"horizontal"===r?a+e:a))return!1;return!0})(n,r,l,i))throw new Error("Invalid placement: Out of bounds or overlapping.");const d=((e,t,a,n)=>{let o=0;return{length:e,direction:t,startRow:a,startCol:n,getHits:()=>o,hit:()=>{++o},isSunk:()=>o>=e}})(l,i,n,r),s=a.length;a.push(d);for(let e=0;e<l;e++){const a="horizontal"===i?r+e:r;t["vertical"===i?n+e:n][a]=s}},getCell:n,hasShip:o,getShip:r,getAllShips:()=>[...a],receiveAttack:(e,a)=>{const o=n(e,a);if(null===o)return t[e][a]="X","X";if(Number.isInteger(o)){const n=r(e,a);if(n)return n.hit(),t[e][a]="H","H"}return console.log("Cell already attacked... Skipping..."),"Cell already attacked... Skipping..."},isAllShipsSunken:()=>a.every((e=>e.isSunk())),getGrid:()=>t,getShipPositions:()=>a.map((({startRow:e,startCol:t,length:a,direction:n})=>({startRow:e,startCol:t,length:a,direction:n}))),getShipIndex:(e,t)=>a.find((a=>{const{startRow:n,startCol:o,length:r,direction:l}=a;return"horizontal"===l?e===n&&t>=o&&t<o+r:t===o&&e>=n&&e<n+r}))||void 0}},t=t=>({name:t,ownBoard:e(10)}),a=t("player-1");a.ownBoard.placeShip(4,3,5,"horizontal"),a.ownBoard.placeShip(6,4,4,"vertical"),a.ownBoard.placeShip(2,1,3,"horizontal"),a.ownBoard.placeShip(1,8,2,"vertical"),a.ownBoard.placeShip(0,4,3,"horizontal"),a.ownBoard.placeShip(8,6,3,"horizontal");const n=t("player-2");n.ownBoard.placeShip(0,1,5,"horizontal"),n.ownBoard.placeShip(3,2,4,"vertical"),n.ownBoard.placeShip(7,5,3,"vertical"),n.ownBoard.placeShip(5,5,3,"horizontal"),n.ownBoard.placeShip(2,6,2,"horizontal"),n.ownBoard.placeShip(2,4,2,"vertical");const o=()=>{const e=Math.floor(10*Math.random()),t=Math.floor(10*Math.random());r(e,t)},r=(e,t)=>{const r=l.getCurrentPlayer()===a?n:a,i=r.ownBoard.receiveAttack(e,t);s(e,t,r.name,i),r.ownBoard.isAllShipsSunken()&&c(),l.swapTurns();const d=l.getCurrentPlayer();p(d),d===n&&setTimeout(o,1e3)},l=(()=>{let e=a;return{swapTurns:()=>e=e===a?n:a,getCurrentPlayer:()=>e,isPlayerTurn:t=>t===e}})(),i=(e,t)=>{const a=e.ownBoard.getGrid().length,n=e.name,o=document.createElement("div");o.classList.add("game-board"),o.id=n;for(let n=0;n<a;n++){const r=document.createElement("div");r.classList.add("column");for(let o=0;o<a;o++){const a=document.createElement("div");a.classList.add("cell"),a.dataset.row=o,a.dataset.col=n;const l=e.ownBoard.hasShip(o,n);"player-2"!==e.name&&l&&a.classList.add("ship"),a.addEventListener("click",(()=>t(o,n,e))),r.appendChild(a)}o.appendChild(r)}return o},d=(e,t)=>{e=Number(e),t=Number(t),r(e,t)},s=(e,t,a,n)=>((e,t,a,n)=>{const o=((e,t,a)=>document.getElementById(a).querySelector(`[data-row="${e}"][data-col="${t}"]`))(e,t,a);"H"===n?(o.classList.remove("ship"),o.classList.add("hit")):"X"===n&&o.classList.add("miss"),o.classList.add("disabled")})(e,t,a,n),c=()=>{(()=>{const e=document.createElement("div");e.classList.add("overlay");const t=document.createElement("div");t.classList.add("announcement-card");const a=document.createElement("h2");a.textContent="Game Over";const n=document.createElement("button");n.textContent="Close",n.addEventListener("click",(()=>{document.getElementById("root").removeChild(e)})),t.appendChild(a),t.appendChild(n),e.appendChild(t),document.getElementById("root").appendChild(e)})()},p=e=>(e=>{const t=document.querySelector("#player-1"),a=document.querySelector("#player-2");"player-1"===e.name?(t.classList.add("disabled"),a.classList.remove("disabled")):"player-2"===e.name&&(a.classList.add("disabled"),t.classList.remove("disabled"))})(e);((e,t)=>{const a=document.createElement("div");a.classList.add("container");const n=i(e,d),o=i(t,d);a.append(n,o),document.getElementById("root").appendChild(a)})(a,n)})();
//# sourceMappingURL=main.bundle.js.map