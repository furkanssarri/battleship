(()=>{"use strict";const t=t=>{const e=Array.from({length:t},(()=>Array(t).fill(null))),o=[],r=(t,o)=>e[t][o],n=(t,e)=>null!==r(t,e),a=(t,r)=>{const n=e[t][r];return Number.isInteger(n)?o[n]:void 0};return{placeShip:(r,a,i,l)=>{if(!((e,o,r,a)=>{if("horizontal"===a&&o+r>t)return!1;if("vertical"===a&&e+r>t)return!1;for(let t=0;t<r;t++)if(n("vertical"===a?e+t:e,"horizontal"===a?o+t:o))return!1;return!0})(r,a,i,l))throw new Error("Invalid placement: Out of bounds or overlapping.");const c=((t,e,o,r)=>{let n=0;return{length:t,direction:e,startRow:o,startCol:r,getHits:()=>n,hit:()=>{++n},isSunk:()=>n>=t}})(i,l,r,a),s=o.length;o.push(c);for(let t=0;t<i;t++){const o="horizontal"===l?a+t:a;e["vertical"===l?r+t:r][o]=s}},getCell:r,hasShip:n,getShip:a,getAllShips:()=>[...o],receiveAttack:(t,o)=>{const n=r(t,o);if(null===n)return e[t][o]="X","X";if(Number.isInteger(n)){const r=a(t,o);if(r)return r.hit(),e[t][o]="H","H"}throw new Error("This cell was already attacked.")},isAllShipsSunken:()=>o.every((t=>t.isSunk())),getGrid:()=>e,getShipPositions:()=>o.map((({startRow:t,startCol:e,length:o,direction:r})=>({startRow:t,startCol:e,length:o,direction:r}))),getShipIndex:(t,e)=>o.find((o=>{const{startRow:r,startCol:n,length:a,direction:i}=o;return"horizontal"===i?t===r&&e>=n&&e<n+a:e===n&&t>=r&&t<r+a}))||void 0}},e=e=>({name:e,ownBoard:t(10)}),o=e("Player-1");o.ownBoard.placeShip(4,3,5,"horizontal"),o.ownBoard.placeShip(6,4,4,"vertical"),o.ownBoard.placeShip(2,1,3,"horizontal"),o.ownBoard.placeShip(1,8,2,"vertical"),o.ownBoard.placeShip(0,4,3,"horizontal"),o.ownBoard.placeShip(8,6,3,"horizontal");const r=e("Player-2");function n(t,e){const o=t.ownBoard.getGrid().length,r=t.name,n=document.createElement("div");n.classList.add("game-board"),n.id=r;for(let r=0;r<o;r++){const a=document.createElement("div");a.classList.add("column");for(let n=0;n<o;n++){const o=document.createElement("div");o.classList.add("cell"),o.dataset.row=n,o.dataset.col=r,t.ownBoard.hasShip(n,r)&&o.classList.add("ship"),o.addEventListener("click",(()=>e(n,r,t))),a.appendChild(o)}n.appendChild(a)}return n}r.ownBoard.placeShip(0,1,5,"horizontal"),r.ownBoard.placeShip(3,2,4,"vertical"),r.ownBoard.placeShip(7,5,3,"vertical"),r.ownBoard.placeShip(5,5,3,"horizontal"),r.ownBoard.placeShip(2,6,2,"horizontal"),r.ownBoard.placeShip(2,4,2,"vertical");const a=(t,e,o)=>{t=Number(t),e=Number(e);const r=!!o.ownBoard.hasShip(t,e);((t,e,o,r)=>{const n=((t,e,o)=>document.getElementById(o).querySelector(`[data-row="${t}"][data-col="${e}"]`))(t,e,o);console.log(n),r?(n.textContent="H",n.classList.remove("ship"),n.classList.add("hit")):(n.textContent="X",n.classList.add("miss"))})(t,e,o.name,r),((t,e,o)=>{o.ownBoard.receiveAttack(t,e)})(t,e,o)};((t,e)=>{const o=document.createElement("div");o.classList.add("container");const r=n(t,a),i=n(e,a);o.append(r,i),document.getElementById("root").appendChild(o)})(o,r)})();
//# sourceMappingURL=main.bundle.js.map