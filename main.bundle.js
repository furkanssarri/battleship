(()=>{"use strict";const t=t=>{const e=Array.from({length:t},(()=>Array(t).fill(null))),o=[],r=(t,o)=>e[t][o],a=(t,e)=>null!==r(t,e),n=(t,r)=>{const a=e[t][r];return Number.isInteger(a)?o[a]:void 0};return{placeShip:(r,n,i,l)=>{if(!((e,o,r,n)=>{if("horizontal"===n&&o+r>t)return!1;if("vertical"===n&&e+r>t)return!1;for(let t=0;t<r;t++)if(a("vertical"===n?e+t:e,"horizontal"===n?o+t:o))return!1;return!0})(r,n,i,l))throw new Error("Invalid placement: Out of bounds or overlapping.");const c=((t,e,o,r)=>{let a=0;return{length:t,direction:e,startRow:o,startCol:r,getHits:()=>a,hit:()=>{++a},isSunk:()=>a>=t}})(i,l,r,n),s=o.length;o.push(c);for(let t=0;t<i;t++){const o="horizontal"===l?n+t:n;e["vertical"===l?r+t:r][o]=s}},getCell:r,hasShip:a,getShip:n,getAllShips:()=>[...o],receiveAttack:(t,o)=>{const a=r(t,o);if(null===a)return e[t][o]="X","X";if(Number.isInteger(a)){const r=n(t,o);if(r)return r.hit(),e[t][o]="H","H"}throw new Error("This cell was already attacked.")},isAllShipsSunken:()=>o.every((t=>t.isSunk())),getGrid:()=>e,getShipPositions:()=>o.map((({startRow:t,startCol:e,length:o,direction:r})=>({startRow:t,startCol:e,length:o,direction:r}))),getShipIndex:(t,e)=>o.find((o=>{const{startRow:r,startCol:a,length:n,direction:i}=o;return"horizontal"===i?t===r&&e>=a&&e<a+n:e===a&&t>=r&&t<r+n}))||void 0}},e=e=>({name:e,ownBoard:t(10)}),o=e("Player-1");o.ownBoard.placeShip(4,3,5,"horizontal"),o.ownBoard.placeShip(6,4,4,"vertical"),o.ownBoard.placeShip(2,1,3,"horizontal"),o.ownBoard.placeShip(1,8,2,"vertical"),o.ownBoard.placeShip(0,4,3,"horizontal"),o.ownBoard.placeShip(8,6,3,"horizontal");const r=e("Player-2");function a(t,e){const o=t.ownBoard.getGrid().length,r=t.name,a=document.createElement("div");a.classList.add("game-board"),a.id=r;for(let r=0;r<o;r++){const n=document.createElement("div");n.classList.add("column");for(let a=0;a<o;a++){const o=document.createElement("div");o.classList.add("cell"),o.dataset.row=a,o.dataset.col=r,t.ownBoard.hasShip(a,r)&&o.classList.add("ship"),o.addEventListener("click",(()=>e(a,r,t))),n.appendChild(o)}a.appendChild(n)}return a}r.ownBoard.placeShip(0,1,5,"horizontal"),r.ownBoard.placeShip(3,2,4,"vertical"),r.ownBoard.placeShip(7,5,3,"vertical"),r.ownBoard.placeShip(5,5,3,"horizontal"),r.ownBoard.placeShip(2,6,2,"horizontal"),r.ownBoard.placeShip(2,4,2,"vertical");const n=(t,e,o)=>{((t,e,o)=>{const r=((t,e)=>document.querySelector(`[data-row="${t}"][data-col="${e}"]`))(t,e);o?(r.textContent="H",r.classList.remove("ship"),r.classList.add("hit")):(r.textContent="X",r.classList.add("miss"))})(t=Number(t),e=Number(e),!!o.ownBoard.hasShip(t,e)),((t,e,o)=>{o.ownBoard.receiveAttack(t,e)})(t,e,o)};((t,e)=>{const o=document.createElement("div");o.classList.add("container");const r=a(t,n),i=a(e,n);o.append(r,i),document.getElementById("root").appendChild(o)})(o,r)})();
//# sourceMappingURL=main.bundle.js.map