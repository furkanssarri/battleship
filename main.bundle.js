(()=>{"use strict";const e=e=>{const t=Array.from({length:e},(()=>Array(e).fill(null))),n=[],r=(e,n)=>t[e][n],a=(e,t)=>null!==r(e,t),o=(e,r)=>{const a=t[e][r];return Number.isInteger(a)?n[a]:void 0};return{placeShip:(r,o,s,l)=>{if(!((t,n,r,o)=>{if("horizontal"===o&&n+r>e)return!1;if("vertical"===o&&t+r>e)return!1;for(let e=0;e<r;e++)if(a("vertical"===o?t+e:t,"horizontal"===o?n+e:n))return!1;return!0})(r,o,s,l))throw new Error("Invalid placement: Out of bounds or overlapping.");const d=((e,t,n,r)=>{let a=0;return{length:e,direction:t,startRow:n,startCol:r,getHits:()=>a,hit:()=>{++a},isSunk:()=>a>=e}})(s,l,r,o),i=n.length;n.push(d);for(let e=0;e<s;e++){const n="horizontal"===l?o+e:o;t["vertical"===l?r+e:r][n]=i}},getCell:r,hasShip:a,getShip:o,getAllShips:()=>[...n],receiveAttack:(e,n)=>{const a=r(e,n);if(null===a)return t[e][n]="X","X";if(Number.isInteger(a)){const r=o(e,n);if(r)return r.hit(),t[e][n]="H","H"}throw new Error("This cell was already attacked.")},isAllShipsSunken:()=>n.every((e=>e.isSunk())),getGrid:()=>t,getShipPositions:()=>n.map((({startRow:e,startCol:t,length:n,direction:r})=>({startRow:e,startCol:t,length:n,direction:r}))),getShipIndex:(e,t)=>n.find((n=>{const{startRow:r,startCol:a,length:o,direction:s}=n;return"horizontal"===s?e===r&&t>=a&&t<a+o:t===a&&e>=r&&e<r+o}))||void 0}},t=t=>({name:t,ownBoard:e(10)}),n=t("player-1");n.ownBoard.placeShip(8,6,3,"horizontal");const r=t("player-2");r.ownBoard.placeShip(0,1,5,"horizontal");const a=(()=>{let e=n;return{swapTurns:()=>e=e===n?r:n,getCurrentPlayer:()=>e,isPlayerTurn:t=>t===e}})(),o=(e,t)=>{const n=e.ownBoard.getGrid().length,r=e.name,a=document.createElement("div");a.classList.add("game-board"),a.id=r;for(let r=0;r<n;r++){const o=document.createElement("div");o.classList.add("column");for(let a=0;a<n;a++){const n=document.createElement("div");n.classList.add("cell"),n.dataset.row=a,n.dataset.col=r,e.ownBoard.hasShip(a,r)&&n.classList.add("ship"),n.addEventListener("click",(()=>t(a,r,e))),o.appendChild(n)}a.appendChild(o)}return a},s=(e,t,n)=>{e=Number(e),t=Number(t);const r=!!n.ownBoard.hasShip(e,t);((e,t,n,r)=>{const a=((e,t,n)=>document.getElementById(n).querySelector(`[data-row="${e}"][data-col="${t}"]`))(e,t,n);r?(a.textContent="H",a.classList.remove("ship"),a.classList.add("hit")):(a.textContent="X",a.classList.add("miss"))})(e,t,n.name,r),((e,t,n)=>{n.ownBoard.receiveAttack(e,t),a.swapTurns();const r=a.getCurrentPlayer();d(r),n.ownBoard.isAllShipsSunken()&&l()})(e,t,n)},l=()=>{(()=>{const e=document.createElement("div");e.classList.add("overlay");const t=document.createElement("div");t.classList.add("announcement-card");const n=document.createElement("h2");n.textContent="Game Over";const r=document.createElement("button");r.textContent="Close",r.addEventListener("click",(()=>{document.getElementById("root").removeChild(e)})),t.appendChild(n),t.appendChild(r),e.appendChild(t),document.getElementById("root").appendChild(e)})()},d=e=>(e=>{const t=document.querySelector("#player-1"),n=document.querySelector("#player-2");"player-1"===e.name?(t.classList.remove("disabled"),n.classList.add("disabled")):"player-2"===e.name&&(n.classList.remove("disabled"),t.classList.add("disabled"))})(e);((e,t)=>{const n=document.createElement("div");n.classList.add("container");const r=o(e,s),a=o(t,s);n.append(r,a),document.getElementById("root").appendChild(n)})(n,r)})();
//# sourceMappingURL=main.bundle.js.map