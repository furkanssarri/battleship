(()=>{"use strict";const e=e=>{const t=Array.from({length:e},(()=>Array(e).fill(null))),a=[],o=(e,a)=>t[e][a],n=(e,t)=>null!==o(e,t),r=(e,o)=>{const n=t[e][o];return Number.isInteger(n)?a[n]:void 0};return{placeShip:(o,r,l,i)=>{if(!((t,a,o,r)=>{if("horizontal"===r&&a+o>e)return!1;if("vertical"===r&&t+o>e)return!1;for(let e=0;e<o;e++)if(n("vertical"===r?t+e:t,"horizontal"===r?a+e:a))return!1;return!0})(o,r,l,i))throw new Error("Invalid placement: Out of bounds or overlapping.");const d=((e,t,a,o)=>{let n=0;return{length:e,direction:t,startRow:a,startCol:o,getHits:()=>n,hit:()=>{++n},isSunk:()=>n>=e}})(l,i,o,r),s=a.length;a.push(d);for(let e=0;e<l;e++){const a="horizontal"===i?r+e:r;t["vertical"===i?o+e:o][a]=s}},getCell:o,hasShip:n,getShip:r,getAllShips:()=>[...a],receiveAttack:(e,a)=>{const n=o(e,a);if(null===n)return t[e][a]="X","X";if(Number.isInteger(n)){const o=r(e,a);if(o)return o.hit(),t[e][a]="H","H"}return console.log("Cell already attacked... Skipping..."),"Cell already attacked... Skipping..."},isAllShipsSunken:()=>a.every((e=>e.isSunk())),getGrid:()=>t,getShipPositions:()=>a.map((({startRow:e,startCol:t,length:a,direction:o})=>({startRow:e,startCol:t,length:a,direction:o}))),getShipIndex:(e,t)=>a.find((a=>{const{startRow:o,startCol:n,length:r,direction:l}=a;return"horizontal"===l?e===o&&t>=n&&t<n+r:t===n&&e>=o&&e<o+r}))||void 0}},t=t=>({name:t,ownBoard:e(10)}),a=t("player-1");a.ownBoard.placeShip(4,3,5,"horizontal"),a.ownBoard.placeShip(6,4,4,"vertical"),a.ownBoard.placeShip(2,1,3,"horizontal"),a.ownBoard.placeShip(1,8,2,"vertical"),a.ownBoard.placeShip(0,4,3,"horizontal"),a.ownBoard.placeShip(8,6,3,"horizontal");const o=t("player-2");o.ownBoard.placeShip(0,1,5,"horizontal"),o.ownBoard.placeShip(3,2,4,"vertical"),o.ownBoard.placeShip(7,5,3,"vertical"),o.ownBoard.placeShip(5,5,3,"horizontal"),o.ownBoard.placeShip(2,6,2,"horizontal"),o.ownBoard.placeShip(2,4,2,"vertical");const n=()=>{let e,t;do{({randomRow:e,randomCol:t}={randomRow:Math.floor(10*Math.random()),randomCol:Math.floor(10*Math.random())})}while(o=e,n=t,"X"===(l=a).ownBoard.getCell(o,n)||"H"===l.ownBoard.getCell(o,n));var o,n,l;r(e,t)};const r=(e,t)=>{const r=l.getCurrentPlayer()===a?o:a,i=r.ownBoard.receiveAttack(e,t);s(e,t,r.name,i),r.ownBoard.isAllShipsSunken()&&c(),l.swapTurns();const d=l.getCurrentPlayer();p(d),d===o&&setTimeout(n,200)},l=(()=>{let e=a;return{swapTurns:()=>e=e===a?o:a,getCurrentPlayer:()=>e,isPlayerTurn:t=>t===e}})(),i=(e,t)=>{const a=e.ownBoard.getGrid().length,o=e.name,n=document.createElement("div");n.classList.add("game-board"),n.id=o;for(let o=0;o<a;o++){const r=document.createElement("div");r.classList.add("column");for(let n=0;n<a;n++){const a=document.createElement("div");a.classList.add("cell"),a.dataset.row=n,a.dataset.col=o;const l=e.ownBoard.hasShip(n,o);"player-2"!==e.name&&l&&a.classList.add("ship"),a.addEventListener("click",(()=>t(n,o,e))),r.appendChild(a)}n.appendChild(r)}return n},d=(e,t)=>{e=Number(e),t=Number(t),r(e,t)},s=(e,t,a,o)=>((e,t,a,o)=>{const n=((e,t,a)=>document.getElementById(a).querySelector(`[data-row="${e}"][data-col="${t}"]`))(e,t,a);"H"===o?(n.classList.remove("ship"),n.classList.add("hit")):"X"===o&&n.classList.add("miss"),n.classList.add("disabled")})(e,t,a,o),c=()=>{(()=>{const e=document.createElement("div");e.classList.add("overlay");const t=document.createElement("div");t.classList.add("announcement-card");const a=document.createElement("h2");a.textContent="Game Over";const o=document.createElement("button");o.textContent="Close",o.addEventListener("click",(()=>{document.getElementById("root").removeChild(e)})),t.appendChild(a),t.appendChild(o),e.appendChild(t),document.getElementById("root").appendChild(e)})()},p=e=>(e=>{const t=document.querySelector("#player-1"),a=document.querySelector("#player-2");"player-1"===e.name?(t.classList.add("disabled"),a.classList.remove("disabled")):"player-2"===e.name&&(a.classList.add("disabled"),t.classList.remove("disabled"))})(e);((e,t)=>{const a=document.createElement("div");a.classList.add("container");const o=i(e,d),n=i(t,d);a.append(o,n),document.getElementById("root").appendChild(a)})(a,o)})();
//# sourceMappingURL=main.bundle.js.map