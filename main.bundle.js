(()=>{"use strict";const t=t=>{const e=Array.from({length:t},(()=>Array(t).fill(null))),n=[],o=(t,n)=>e[t][n],r=(t,e)=>null!==o(t,e),a=(t,o)=>{const r=e[t][o];return Number.isInteger(r)?n[r]:void 0};return{placeShip:(o,a,i,l)=>{if(!((e,n,o,a)=>{if("horizontal"===a&&n+o>t)return!1;if("vertical"===a&&e+o>t)return!1;for(let t=0;t<o;t++)if(r("vertical"===a?e+t:e,"horizontal"===a?n+t:n))return!1;return!0})(o,a,i,l))throw new Error("Invalid placement: Out of bounds or overlapping.");const d=((t,e,n,o)=>{let r=0;return{length:t,direction:e,startRow:n,startCol:o,getHits:()=>r,hit:()=>{++r},isSunk:()=>r>=t}})(i,l,o,a),s=n.length;n.push(d);for(let t=0;t<i;t++){const n="horizontal"===l?a+t:a;e["vertical"===l?o+t:o][n]=s}},getCell:o,hasShip:r,getShip:a,getAllShips:()=>[...n],receiveAttack:(t,n)=>{const r=o(t,n);if(null===r)return e[t][n]="X","X";if(Number.isInteger(r)){const o=a(t,n);if(o)return o.hit(),e[t][n]="H","H"}throw new Error("This cell was already attacked.")},isAllShipsSunken:()=>n.every((t=>t.isSunk())),getGrid:()=>e,getShipPositions:()=>n.map((({startRow:t,startCol:e,length:n,direction:o})=>({startRow:t,startCol:e,length:n,direction:o}))),getShipIndex:(t,e)=>n.find((n=>{const{startRow:o,startCol:r,length:a,direction:i}=n;return"horizontal"===i?t===o&&e>=r&&e<r+a:e===r&&t>=o&&t<o+a}))||void 0}},e=e=>({name:e,ownBoard:t(10)}),n=e("Player-1");n.ownBoard.placeShip(8,6,3,"horizontal");const o=e("Player-2");function r(t,e){const n=t.ownBoard.getGrid().length,o=t.name,r=document.createElement("div");r.classList.add("game-board"),r.id=o;for(let o=0;o<n;o++){const a=document.createElement("div");a.classList.add("column");for(let r=0;r<n;r++){const n=document.createElement("div");n.classList.add("cell"),n.dataset.row=r,n.dataset.col=o,t.ownBoard.hasShip(r,o)&&n.classList.add("ship"),n.addEventListener("click",(()=>e(r,o,t))),a.appendChild(n)}r.appendChild(a)}return r}o.ownBoard.placeShip(0,1,5,"horizontal");const a=(t,e,n)=>{t=Number(t),e=Number(e);const o=!!n.ownBoard.hasShip(t,e);((t,e,n,o)=>{const r=((t,e,n)=>document.getElementById(n).querySelector(`[data-row="${t}"][data-col="${e}"]`))(t,e,n);o?(r.textContent="H",r.classList.remove("ship"),r.classList.add("hit")):(r.textContent="X",r.classList.add("miss"))})(t,e,n.name,o),((t,e,n)=>{n.ownBoard.receiveAttack(t,e),n.ownBoard.isAllShipsSunken()&&i()})(t,e,n)},i=()=>{(()=>{const t=document.createElement("div");t.classList.add("overlay");const e=document.createElement("div");e.classList.add("announcement-card");const n=document.createElement("h2");n.textContent="Game Over";const o=document.createElement("button");o.textContent="Close",o.addEventListener("click",(()=>{document.getElementById("root").removeChild(t)})),e.appendChild(n),e.appendChild(o),t.appendChild(e),document.getElementById("root").appendChild(t)})()};((t,e)=>{const n=document.createElement("div");n.classList.add("container");const o=r(t,a),i=r(e,a);n.append(o,i),document.getElementById("root").appendChild(n)})(n,o)})();
//# sourceMappingURL=main.bundle.js.map